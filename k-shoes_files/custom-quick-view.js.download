window.allCardProductData=[];const imagesToCache=[];window.setOnClickVariant=!1;//! Called in "quick-add.js" when modal renders
function modalFirstlyLoaded(modal){setTimeout(()=>{initializeModalSwiper(modal),addClickOnVariants(modal),bodyOverFlow(),setSizeChartLink(modal),ReloadSmartWishlist()},1e3)}function setSizeChartLink(modal){let productId=modal.querySelector('product-info form input[name="product-id"]').value,productData=allCardProductData[0],origin=window.location.origin,handle=productData.productData.handle,link=origin+"/products/"+handle;console.log(link);const pElement=modal.querySelector(".main-pdpsizepop");if(pElement){const aElement=document.createElement("a");aElement.href=link,aElement.textContent=pElement.textContent,aElement.className="main-pdpsizepop",pElement.parentNode.replaceChild(aElement,pElement)}}//! Set the body overflow hidden
function bodyOverFlow(){let body=document.body;body.style.overflow="hidden",body.style.position="fixed",body.style.width="100%"}//! Adding click event on color variants
function addClickOnVariants(modal){let colorVariants=modal.querySelectorAll(".url_circle");colorVariants&&Array.from(colorVariants).forEach(colorVariant=>{colorVariant.addEventListener("click",handleColorVariantClick)})}//!  Getting the clicked variant's object
function handleColorVariantClick(event){let clickedVariant=event.target,openedModal=clickedVariant.closest(".quick-add-modal-parent");event.preventDefault();let clickedVariantId=clickedVariant.getAttribute("data-id"),variantObject=allCardProductData[0].productColorVariants.find(colorVariant=>colorVariant.color_variant_info.id===parseInt(clickedVariantId));variantObject?(changeVendorName(openedModal,variantObject),changeTitle(openedModal,variantObject),updateSwiperImages(openedModal,variantObject),updateSizeVariants(openedModal,variantObject),addClickOnSizes(openedModal,variantObject),setClickColorActive(event),setOnClickTrue(),setNewSizeChartLink(openedModal,variantObject)):console.log("No color variant object found with the given ID")}function setNewSizeChartLink(openedModal,variantObject){let link=window.location.origin+"/products/"+variantObject.color_variant_info.handle;console.log(link);const pElement=openedModal.querySelector(".main-pdpsizepop");if(pElement){const aElement=document.createElement("a");aElement.href=link,aElement.textContent=pElement.textContent,aElement.className="main-pdpsizepop",pElement.parentNode.replaceChild(aElement,pElement)}}function closeQuickModal(){let body=document.body;body.style.overflow=null,allCardProductData.length=0,setOnClickVariant=!1}function setOnClickTrue(){setOnClickVariant||(setOnClickVariant=!0)}function setClickColorActive(event){let allColorVariants=event.target.closest(".color_variant_wrapper_cs").querySelectorAll(".product_color_variant_cs"),activeVariant=event.target.querySelector(".product_color_variant_cs");console.log("\u{1F680} ~ setClickColorActive ~ activeVariant:",activeVariant),allColorVariants.forEach(variant=>{variant.classList.contains("matched")&&variant.classList.remove("matched")}),activeVariant.classList.add("matched")}//! Adding click function on size variants on color change
function addClickOnSizes(openedModal,obj){let sizesVariants=openedModal.querySelectorAll(".product_variant_wrapper input");sizesVariants&&Array.from(sizesVariants).forEach(sizeVariant=>{sizeVariant.addEventListener("click",handleSizeVariantClick.bind(this,openedModal,obj))})}//! Getting click on size variant
function handleSizeVariantClick(openedModal,obj,event){updateFormVariantID(openedModal,obj,event),updateVariantPrice(openedModal,obj,event)}function updateVariantPrice(openedModal,obj,event){let clickedSize=event.target.value,clickVariantObj=obj.color_variant_info.variants.find(variant=>parseInt(variant.option1)==parseInt(clickedSize)),priceData=processVariantPrice(clickVariantObj);renderVariantPrice(openedModal,priceData)}function updateFormVariantID(openedModal,obj,event){let clickSize=event.target.value,variantParentInput=event.target.closest(".product_variant_wrapper").querySelectorAll(".product_variant_wrapper input"),variantIdInform=openedModal.querySelector("product-form input.product-variant-id"),upperVariantIdInform=openedModal.querySelector('form input[name="id"]'),clickVariantObj=obj.color_variant_info.variants.find(variant=>parseInt(variant.option1)==parseInt(clickSize));variantParentInput.forEach(input=>{input.removeAttribute("checked")}),event.target.setAttribute("checked",""),variantIdInform.value=clickVariantObj.id,upperVariantIdInform.value=clickVariantObj.id}//! Updating the quick view product form
function setProductFormInfo(openedModal,obj,variant){let lowerProductIdInForm=openedModal.querySelector('product-form input[name="product-id"]'),lowerVariantIdInform=openedModal.querySelector("product-form input.product-variant-id"),upperProductIdInForm=openedModal.querySelector('form input[name="product-id"]'),upperVariantIdInform=openedModal.querySelector('form input[name="id"]');lowerProductIdInForm.value=obj.color_variant_info.id,upperProductIdInForm.value=obj.color_variant_info.id,upperVariantIdInform.value=variant.id,lowerVariantIdInform.value=variant.id}//! Formatting the price of the selected size variant
function formatPrice(price){return price?(price/100).toLocaleString("en-US"):""}//! Process the price, compare price and discount
function processVariantPrice(variant){const{price,compare_at_price}=variant,formattedPrice=formatPrice(price),data={formattedPrice};if(compare_at_price){const formattedComparePrice=formatPrice(compare_at_price),comparePriceNum=parseFloat(formattedComparePrice.replace(/,/g,"")),priceNum=parseFloat(formattedPrice.replace(/,/g,""));if(comparePriceNum>priceNum){const discountPercentage=(comparePriceNum-priceNum)/comparePriceNum*100;data.formattedComparePrice=formattedComparePrice,data.discountPercentage=Math.ceil(discountPercentage)}}return data}//! Renders the size variant price when size of a color is selected
function renderVariantPrice(openedModal,priceData){let price=openedModal.querySelector("span.price-item.price-item--sale.price-item--last"),compareAtPrice=openedModal.querySelector("s.price-item.price-item--regular"),priceDiscount=openedModal.querySelector(".main_discount_badge span.discount.discount_fnt_sze");if(price.innerText=`\u20B9 ${priceData.formattedPrice}`,priceData.formattedComparePrice)compareAtPrice.innerText=`\u20B9 ${priceData.formattedComparePrice}`,priceDiscount.innerText=`${priceData.discountPercentage}% Off`,compareAtPrice.style.display="inline-block",priceDiscount.style.display="inline-block";else{compareAtPrice.innerText="",priceDiscount.innerText="",compareAtPrice.style.display="none",priceDiscount.style.display="none";return}}//! Changing the size variants on color variant change
function updateSizeVariants(openedModal,obj){let sizeVariantsWrapper=openedModal.querySelector(".product_variant_wrapper"),variants=obj.color_variant_info.variants,sectionId=sizeVariantsWrapper.getAttribute("data-section-id"),setVariantChecked=!1;sizeVariantsWrapper.innerHTML="",variants.forEach((variant,index)=>{let variantInput=document.createElement("input");if(variantInput.type="radio",variantInput.id=`${sectionId}-1-${index}`,variantInput.name="Select size",variantInput.value=`${variant.option1}`,variantInput.setAttribute("form",`product-form-${sectionId}`),!setVariantChecked&&variant.available){variantInput.setAttribute("checked",""),setVariantChecked=!0;let priceData=processVariantPrice(variant);renderVariantPrice(openedModal,priceData),setProductFormInfo(openedModal,obj,variant)}variant.available||variantInput.classList.add("disabled");let variantLabel=document.createElement("label");variantLabel.setAttribute("for",`${sectionId}-1-${index}`),variantLabel.innerText=`${variant.option1}`;let variantSpan=document.createElement("span");variantSpan.classList.add("visually-hidden","label-unavailable"),variantSpan.innerText="Variant sold out or unavailable",sizeVariantsWrapper.appendChild(variantInput),sizeVariantsWrapper.appendChild(variantLabel),variantLabel.appendChild(variantSpan)})}//! Changing the swiper images on variant change
function updateSwiperImages(openedModal,obj){let bigSlider=openedModal.querySelector(".mySwiperancs .swiper-wrapper"),smallSlider=openedModal.querySelector(".mySwipercsan .swiper-wrapper"),variantImages=obj.color_variant_info.media,variantImagesAlt=obj.color_variant_info.title;bigSlider.innerHTML="",variantImages.forEach(image=>{let slide=document.createElement("div");slide.classList.add("swiper-slide");let imageDiv=document.createElement("div");imageDiv.classList.add("bigger_firstslide");let img=`<img srcset="${image.src} 375w,${image.src} 550w,${image.src} 750w,${image.src} 810w" sizes="100vw" src="${image.src}" width="${image.width}" height="${image.height}" alt="${variantImagesAlt}">`;bigSlider.appendChild(slide),slide.appendChild(imageDiv),slide.innerHTML=img}),smallSlider.innerHTML="",variantImages.forEach(image=>{let slide=document.createElement("div");slide.classList.add("swiper-slide"),slide.classList.add("external_wd");let imageDiv=document.createElement("div");imageDiv.classList.add("small_thumbnails");let img=`<img srcset="${image.src} 375w,${image.src} 550w,${image.src} 750w,${image.src} 810w" sizes="100vw" src="${image.src}" width="${image.width}" height="${image.height}">`;smallSlider.appendChild(slide),slide.appendChild(imageDiv),slide.innerHTML=img}),initialiseMainSwiper()}//! Changing the Title on variant change
function changeTitle(openedModal,obj){let title=openedModal.querySelector(".product__title h2");title.textContent="",title.textContent=obj.color_variant_info.title}//! Changing the Vendor name on variant change
function changeVendorName(openedModal,obj){let vendorName=openedModal.querySelector(".custom-vendor");vendorName.textContent="",vendorName.textContent=obj.color_variant_info.vendor}//! Initializing the modal swiper
function initializeModalSwiper(modal){let scripts=modal.getElementsByTagName("script");Array.from(scripts).forEach(script=>{if(script.hasAttribute("data-value")){const scriptContent=script.textContent,newScript=document.createElement("script");newScript.textContent=scriptContent,document.head.appendChild(newScript),initialiseMainSwiper()}})}//! Getting the json of the product and its variant
function getProductJson(btn){let dataElement=btn.parentElement.parentElement.parentElement.nextElementSibling,decodedData=atob(dataElement.innerHTML),productDataJson=JSON.parse(decodedData);allCardProductData.push(productDataJson);//! Pushing the images of the product into the imagesToCache Array.
productDataJson.productData&&productDataJson.productData.images&&allCardProductData[0].productData.images.forEach(url=>{imagesToCache.push(url)});//! Pushing the images of the product into the imagesToCache Array.
productDataJson.productColorVariants&&productDataJson.productColorVariants.forEach(variant=>{variant.color_variant_info&&variant.color_variant_info.images&&variant.color_variant_info.images.forEach(imagesUrl=>{imagesToCache.push(imagesUrl)})}),cacheImages(imagesToCache,!1)}function openModal(event){let btnParent=event.target.closest(".card__content"),modalOpenerBtn=btnParent.querySelector('modal-opener button[type="submit"]'),atcBtn=btnParent.querySelector('product-form button[type="submit"]');modalOpenerBtn?modalOpenerBtn.click():atcBtn.click()}//! Cacheing all the images of product and its variants.
function cacheImages(array,waitForOtherResources,timeout){if(array.length!==0){let loadNow2=function(){if(!loaded){loaded=!0;for(var i=0;i<imgs.length;i++){var img=new Image;img.onload=img.onerror=img.onabort=function(){var index=list.indexOf(this);index!==-1&&list.splice(index,1)},list.push(img),img.src=imgs[i]}}};var loadNow=loadNow2;cacheImages.list||(cacheImages.list=[]);let loaded=!1,list=cacheImages.list,imgs=array.slice(0),t=timeout||15*1e3,timer;!waitForOtherResources||document.readyState==="complete"?loadNow2():(window.addEventListener("load",function(){clearTimeout(timer),loadNow2()}),timer=setTimeout(loadNow2,t))}}function handleDummyQuickViewAtc(btn){let realBtnWrapper=btn.parentElement.previousElementSibling;console.log("\u{1F680} ~ handleDummyQuickViewAtc ~ realBtnWrapper:",realBtnWrapper),realBtnWrapper.querySelector('.product-form__buttons.atc-dflex button[type="submit"]').click()}function handleDummyQuickViewPayment(btn){btn.parentElement.previousElementSibling.querySelector(".shopify-payment-button__button.shopify-payment-button__button--unbranded").click()}
//# sourceMappingURL=/cdn/shop/t/92/assets/custom-quick-view.js.map?v=36053735800054469761742986561
